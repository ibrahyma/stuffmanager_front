(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{33:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),c=a.n(n),i=a(22),r=a.n(i),l=a(9),o=a(10),d=a(12),j=a(11),u=a(14),p=a(4),h=a(6),b=(a(33),function(e){var t=e.hRef,a=e.content,n=e.onclick,c=Object(p.g)().pathname===t;return Object(s.jsx)(u.a,{children:Object(s.jsx)("li",{className:"menu__option ".concat(c&&"menu__option--selected"),children:c?Object(s.jsx)("span",{children:a}):Object(s.jsx)("a",{href:t,onClick:n,children:a})})})}),m=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.admin,a=e.logoutHandler;return Object(s.jsxs)("nav",{className:"navbar",children:[Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)("a",{href:"/",children:"Stuff Manager"})}),Object(s.jsx)("ul",{className:"menu",children:t?[Object(s.jsx)(b,{hRef:"/",content:"Liste des produits"},0),Object(s.jsx)(b,{hRef:"/addProduct",content:"Ajouter un produit"},1),Object(s.jsx)(b,{hRef:"/logout",content:"D\xe9connexion",onclick:a},2)]:[Object(s.jsx)(b,{hRef:"/",content:"Liste des produits"},0),Object(s.jsx)(b,{hRef:"/login",content:"Connexion"},3),Object(s.jsx)(b,{hRef:"/register",content:"Inscription"},4)]})]})}}]),a}(n.Component),O=function(){return Object(s.jsx)("footer",{className:"footer",children:Object(s.jsx)("span",{children:"Tous droits r\xe9serv\xe9s \xa9 2020"})})},x=function(){return[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"Non trouv\xe9e - STUFF MANAGER"})},0),Object(s.jsx)("h1",{className:"title",children:"Erreur 404"},1),Object(s.jsx)("p",{className:"error",children:"Cette page n'existe pas ou a \xe9t\xe9 retir\xe9e."},2)]},f=function(){return Object(s.jsx)("div",{className:"loading"})},g=function(e){var t=e.ID,a=e.name,n=e.price,c=e.imageUrl,i=e.firstOfRange;return Object(s.jsx)("div",{className:"productItem ".concat(i&&"productItem--firstOfRange"),children:Object(s.jsxs)("a",{href:"/product/".concat(t),title:a,children:[Object(s.jsx)("img",{className:"productItem__img",alt:a,src:c}),Object(s.jsxs)("div",{className:"productItem__caption",children:[Object(s.jsx)("p",{className:"name",children:a}),Object(s.jsx)("p",{className:"price",children:n})]})]})})},N=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={products:null,loaded:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new XMLHttpRequest;t.open("GET","http://localhost:3200/api/products"),t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status){var a=JSON.parse(t.responseText);e.setState({products:a.products})}e.setState({loaded:!0})}},t.send()}},{key:"render",value:function(){var e=this.state,t=e.products,a=e.loaded;return[Object(s.jsx)("h1",{className:"title",children:"Liste des produits"},0),Object(s.jsx)("div",{className:"productsList",children:a?t?t.map((function(e,t){return Object(s.jsx)(g,{ID:e._id,name:e.name,price:e.price,imageUrl:e.imageUrl,firstOfRange:t%4===0},e._id)})):Object(s.jsx)("p",{children:"Aucun produit pour l'instant."}):Object(s.jsx)(f,{})},1)]}}]),a}(n.Component),v=a(3),S=function(e){var t=e.admin,a=Object(n.useState)(null),c=Object(v.a)(a,2),i=c[0],r=c[1],l=Object(n.useState)(Object(p.h)().id),o=Object(v.a)(l,1)[0],d=Object(n.useState)(!1),j=Object(v.a)(d,2),u=j[0],b=j[1],m="http://localhost:3200/api/products/".concat(o),O=new XMLHttpRequest,x={justifyContent:u?"initial":"center"};if(u||(O.open("GET",m),O.onreadystatechange=function(){if(4===O.readyState){if(200===O.status){var e=JSON.parse(O.responseText);r(e.product)}b(!0)}},O.send()),i)var g=i._id,N=i.name,S=i.price,y=i.description,C=i.quantity,F=i.imageUrl;return[u?i?Object(s.jsx)("h1",{className:"title",children:N},0):Object(s.jsx)("h1",{className:"title",children:"Produit inexistant"},1):Object(s.jsx)("h1",{className:"title",children:"Encore un peu de patience..."},2),Object(s.jsx)("div",{className:"product",style:x,children:u?i?[Object(s.jsx)(h.a,{children:Object(s.jsxs)("title",{children:[N," - STUFF MANAGER"]})},4),Object(s.jsx)("img",{alt:N,src:F,className:"product__img"},5),Object(s.jsxs)("div",{className:"product__aside",children:[Object(s.jsx)("p",{className:"description",children:y}),Object(s.jsxs)("div",{className:"otherInfos",children:[Object(s.jsxs)("p",{children:["Prix : ",Object(s.jsx)("span",{className:"price",children:S})]}),Object(s.jsxs)("p",{children:["Quantit\xe9 : ",Object(s.jsx)("span",{children:C>0?C:"Aucune."})]}),t&&[Object(s.jsx)("p",{children:Object(s.jsx)("a",{className:"link",href:"/product/".concat(g,"/modify"),title:"Modifier",children:"Modifier"})},6),Object(s.jsx)("p",{children:Object(s.jsx)("a",{className:"link",href:"/product/".concat(g,"/delete"),title:"Supprimer",children:"Supprimer"})},7)]]})]},6)]:Object(s.jsx)("p",{className:"error",children:"Ce produit n'existe pas ou a \xe9t\xe9 retir\xe9."}):Object(s.jsx)(f,{})},3)]},y=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={login:"",password:"",redirect:null,error:null},e.onChangeLogin=function(t){e.setState({login:t.target.value})},e.onChangePassword=function(t){e.setState({password:t.target.value})},e.onSubmit=function(t){t.preventDefault();var a=e.state,s=a.login,n=a.password,c=new XMLHttpRequest;c.open("POST","http://localhost:3200/api/auth/login"),c.onreadystatechange=function(){if(4===c.readyState){var t=JSON.parse(c.responseText);if(200===c.status){var a=t.token,s=t.userId;e.props.setTokenHandle(a,s),e.setState({redirect:"/",error:null})}else e.setState({error:t.message})}},c.setRequestHeader("Content-Type","application/json"),c.send(JSON.stringify({login:s,email:s,password:n}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.login,a=e.password,n=e.redirect,c=e.error,i=t.length>0&&a.length>0;return n?Object(s.jsx)(p.a,{to:n}):[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"Connexion - STUFF MANAGER"})},0),Object(s.jsx)("h1",{className:"title",children:"Connexion"},1),c&&Object(s.jsx)("p",{className:"error",children:c},2),Object(s.jsxs)("form",{action:"/",className:"loginForm",method:"POST",onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"loginForm__field field",children:[Object(s.jsx)("label",{htmlFor:"Email ou pseudo",children:"Email ou pseudo"}),Object(s.jsx)("input",{className:"textfield",type:"text",name:"login",onChange:this.onChangeLogin,placeholder:"jdupont"})]}),Object(s.jsxs)("div",{className:"loginForm__field field",children:[Object(s.jsx)("label",{htmlFor:"Mot de passe",children:"Mot de passe"}),Object(s.jsx)("input",{className:"textfield",type:"password",name:"mdp",onChange:this.onChangePassword})]}),Object(s.jsx)("div",{className:"loginForm__field field",children:Object(s.jsx)("input",{className:"button ".concat(i||"button--disabled"),type:"submit",value:"Se connecter",disabled:!i})})]},3)]}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:null,success:null,email:"",login:"",password:""},e.isValidEmail=function(){return e.state.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)},e.isValidLogin=function(){return e.state.login.match(/^[a-zA-Z0-9]{6,}$/)},e.isValidPassword=function(){return e.state.password.length>=6},e.onChangeEmail=function(t){e.setState({email:t.target.value}),t.target.style.borderBottomColor=e.isValidEmail()?"green":"red"},e.onChangeLogin=function(t){e.setState({login:t.target.value}),t.target.style.borderBottomColor=e.isValidLogin()?"green":"red"},e.onChangePassword=function(t){e.setState({password:t.target.value}),t.target.style.borderBottomColor=e.isValidPassword()?"green":"red"},e.onSubmit=function(t){t.preventDefault();var a=e.state,s=a.email,n=a.login,c=a.password,i=new XMLHttpRequest;i.open("POST","http://localhost:3200/api/auth/register"),i.onreadystatechange=function(){if(4===i.readyState){var t=JSON.parse(i.responseText);201===i.status?e.setState({error:null,success:t.message}):e.setState({error:t.message,success:null})}},i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify({email:s,login:n,password:c}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.success,n=this.isValidEmail()&&this.isValidLogin()&&this.isValidPassword();return[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"Inscription - STUFF MANAGER"})},0),Object(s.jsx)("h1",{className:"title",children:"Inscription"},1),t&&Object(s.jsx)("p",{className:"error",children:t},2),a&&Object(s.jsx)("p",{className:"success",children:a},3),Object(s.jsxs)("form",{action:"/",className:"registerForm",method:"POST",onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"registerForm__field field",children:[Object(s.jsx)("label",{htmlFor:"Email",children:"Email"}),Object(s.jsx)("input",{className:"textfield",name:"email",onChange:this.onChangeEmail,placeholder:"jdupont@gmail.com",type:"text"})]}),Object(s.jsxs)("div",{className:"registerForm__field field",children:[Object(s.jsx)("label",{htmlFor:"Pseudo",children:"Pseudo"}),Object(s.jsx)("input",{className:"textfield",type:"text",name:"login",onChange:this.onChangeLogin,placeholder:"Minimum 6 caract\xe8res, alphanum\xe9riques uniquement"})]}),Object(s.jsxs)("div",{className:"registerForm__field field",children:[Object(s.jsx)("label",{htmlFor:"Mot de passe",children:"Mot de passe"}),Object(s.jsx)("input",{className:"textfield",type:"password",name:"mdp",onChange:this.onChangePassword,placeholder:"Minimum 6 caract\xe8res"})]}),Object(s.jsx)("div",{className:"registerForm__field field",children:Object(s.jsx)("input",{className:"button ".concat(n||"button--disabled"),disabled:!n,type:"submit",value:"S'inscrire"})})]},4)]}}]),a}(n.Component),F=function(){return[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"Acc\xe8s interdit - STUFF MANAGER"})},0),Object(s.jsx)("h1",{className:"title",children:"Erreur 403"},1),Object(s.jsx)("p",{className:"error",children:"Vous n'avez pas acc\xe8s \xe0 cette page."},2)]},k=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={description:"",error:null,imageUrl:"",fileChecked:!1,linkChecked:!1,name:"",price:"",quantity:"",success:null},e.isNotEmpty=function(e){return""!==e.trim()},e.onChangeDescription=function(t){e.setState({description:t.target.value})},e.onChangeName=function(t){var a=t.target.value;e.setState({name:a}),t.target.style.borderBottomColor=e.isNotEmpty(a)?"green":"red"},e.onChangePrice=function(t){var a=t.target.value,s=function(e){return e.match(/^[0-9]+\.?([0-9]{1,2})?$/)};(s(a)||""===a)&&e.setState({price:a}),t.target.style.borderBottomColor=s(e.state.price)?"green":"red"},e.onChangeQuantity=function(t){var a=t.target.value,s=function(e){return e.match(/^[0-9]+$/)};(s(a)||""===a)&&e.setState({quantity:a}),t.target.style.borderBottomColor=s(e.state.quantity)?"green":"red"},e.onChangeImageUrl=function(t){var a=t.target.value;e.setState({imageUrl:a}),t.target.style.borderBottomColor=e.isNotEmpty(a)?"green":"red"},e.onSelectRadioLink=function(){e.setState({linkChecked:!0,fileChecked:!1})},e.onSelectRadioFile=function(){e.setState({linkChecked:!1,fileChecked:!0})},e.onSubmit=function(t){t.preventDefault();var a=e.state,s=a.name,n=a.price,c=a.description,i=a.quantity,r=a.imageUrl,l=new XMLHttpRequest;l.open("POST","http://localhost:3200/api/products"),l.onreadystatechange=function(){if(4===l.readyState){var t=JSON.parse(l.responseText);201===l.status?e.setState({error:null,success:t.message}):e.setState({error:t.message,success:null})}},l.setRequestHeader("Content-type","application/json"),l.setRequestHeader("Authorization",e.props.token),l.send(JSON.stringify({name:s,price:Number.parseFloat(n),description:c,quantity:Number.parseInt(i),imageUrl:r}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.fileChecked,n=e.linkChecked,c=e.success,i=this.state,r=i.name,l=i.price,o=i.quantity,d=i.imageUrl,j=this.props.token,u=this.isNotEmpty(r)&&this.isNotEmpty(l)&&this.isNotEmpty(o)&&this.isNotEmpty(d);return j?[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"Ajouter un produit - STUFF MANAGER"})},0),Object(s.jsx)("h1",{className:"title",children:"Ajouter un produit"},1),t&&Object(s.jsx)("p",{className:"error",children:t},2),c&&Object(s.jsx)("p",{className:"success",children:c},3),Object(s.jsxs)("form",{action:"",method:"POST",onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Nom",children:"Nom du produit"}),Object(s.jsx)("input",{className:"textfield",name:"name",onChange:this.onChangeName,placeholder:"Nom du produit",type:"text"})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Prix",children:"Prix (\u20ac)"}),Object(s.jsx)("input",{className:"textfield",inputMode:"numeric",name:"price",onChange:this.onChangePrice,placeholder:"12.34",type:"text",value:l})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Description",children:"Description"}),Object(s.jsx)("textarea",{className:"textfield textfield--area",name:"description",onChange:this.onChangeDescription,placeholder:"Ici, la description..."})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Quantit\xe9",children:"Quantit\xe9"}),Object(s.jsx)("input",{className:"textfield",inputMode:"decimal",name:"quantity",onChange:this.onChangeQuantity,placeholder:"123",type:"text",value:o})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Quantit\xe9",children:"Image"}),Object(s.jsxs)("div",{className:"field__radio",children:[Object(s.jsx)("input",{checked:n,type:"radio",name:"imageUrlOption",value:"link",onChange:this.onSelectRadioLink}),Object(s.jsx)("input",{className:"textfield ".concat(n||"textfield--disabled"),disabled:!n,type:"text",onChange:this.onChangeImageUrl,name:"imageUrl",placeholder:"https://cdn.urldelimage.com/image.png"})]}),Object(s.jsxs)("div",{className:"field__radio",children:[Object(s.jsx)("input",{checked:a,type:"radio",name:"imageUrlOption",value:"file",onChange:this.onSelectRadioFile}),Object(s.jsx)("input",{className:"textfield ".concat(a||"textfield--disabled"),disabled:!a,type:"file",name:"imageUrl",placeholder:"Chargez votre image ici..."})]})]}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{className:"button ".concat(u||"button--disabled"),disabled:!u,type:"submit",value:"Ajouter le produit"})})]},4)]:Object(s.jsx)(F,{})}}]),a}(n.Component),T=function(e){var t=e.token,a=Object(n.useState)(""),c=Object(v.a)(a,2),i=c[0],r=c[1],l=Object(n.useState)(null),o=Object(v.a)(l,2),d=o[0],j=o[1],u=Object(n.useState)(Object(p.h)().id),b=Object(v.a)(u,1)[0],m=Object(n.useState)(""),O=Object(v.a)(m,2),x=O[0],g=O[1],N=Object(n.useState)(!1),S=Object(v.a)(N,2),y=S[0],C=S[1],k=Object(n.useState)(!1),T=Object(v.a)(k,2),E=T[0],R=T[1],A=Object(n.useState)(!1),_=Object(v.a)(A,2),M=_[0],w=_[1],P=Object(n.useState)(""),I=Object(v.a)(P,2),U=I[0],q=I[1],L=Object(n.useState)(""),D=Object(v.a)(L,2),H=D[0],J=D[1],B=Object(n.useState)(null),G=Object(v.a)(B,2),V=G[0],z=G[1],Q=Object(n.useState)(null),X=Object(v.a)(Q,2),$=X[0],Z=X[1],K=Object(n.useState)(null),W=Object(v.a)(K,2),Y=W[0],ee=W[1];function te(e){return""!==e.trim()}if(!M){var ae="http://localhost:3200/api/products/".concat(b),se=new XMLHttpRequest;se.open("GET",ae),se.onreadystatechange=function(){if(4===se.readyState){var e=JSON.parse(se.responseText);if(200===se.status){var t=e.product,a=t.name,s=t.description,n=t.price,c=t.imageUrl,i=t.quantity;z(e.product),q(a),r(s||""),J("".concat(n)),Z("".concat(i)),g(c)}w(!0)}},se.send()}if(!t)return Object(s.jsx)(F,{});if(!M)return[Object(s.jsx)("h1",{className:"title",children:"Encore un peu de patience..."},0),Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)(f,{})},1)];if(!V)return[Object(s.jsx)("h1",{className:"title",children:"Produit inexistant"},0),Object(s.jsx)("p",{className:"error",children:"Ce produit n'existe pas ou a \xe9t\xe9 retir\xe9."},1)];var ne=te(U)&&te(H)&&te($)&&te(x);return[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"Modifier un produit - STUFF MANAGER"})},0),Object(s.jsx)("h1",{className:"title",children:"Modifier le produit"},1),d&&Object(s.jsx)("p",{className:"error",children:d},2),Y&&Object(s.jsx)("p",{className:"success",children:Y},3),Object(s.jsxs)("form",{action:"",method:"POST",onSubmit:function(e){e.preventDefault();var a="http://localhost:3200/api/products/".concat(b),s=new XMLHttpRequest;s.open("PUT",a),s.onreadystatechange=function(){if(4===s.readyState){var e=JSON.parse(s.responseText).message;j(201===s.status?null:e),ee(201===s.status?e:null)}},s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("Authorization",t),s.send(JSON.stringify({name:U,price:Number.parseFloat(H),description:i,quantity:Number.parseInt($),imageUrl:x}))},children:[Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Nom",children:"Nom du produit"}),Object(s.jsx)("input",{className:"textfield",name:"name",onChange:function(e){var t=e.target.value;q(t),e.target.style.borderBottomColor=te(t)?"green":"red"},placeholder:"Nom du produit",type:"text",value:U})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Prix",children:"Prix (\u20ac)"}),Object(s.jsx)("input",{className:"textfield",inputMode:"numeric",name:"price",onChange:function(e){var t=e.target.value,a=function(e){return e.match(/^[0-9]+\.?([0-9]{1,2})?$/)};(a(t)||""===t)&&J(t),e.target.style.borderBottomColor=a(H)?"green":"red"},placeholder:"12.34",type:"text",value:H})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Description",children:"Description"}),Object(s.jsx)("textarea",{className:"textfield textfield--area",defaultValue:i,name:"description",onChange:function(e){r(e.target.value)},placeholder:"Ici, la description..."})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Quantit\xe9",children:"Quantit\xe9"}),Object(s.jsx)("input",{className:"textfield",inputMode:"decimal",name:"quantity",onChange:function(e){var t=e.target.value,a=function(e){return e.match(/^[0-9]+$/)};(a(t)||""===t)&&Z(t),e.target.style.borderBottomColor=a($)?"green":"red"},placeholder:"123",type:"text",value:$})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{htmlFor:"Quantit\xe9",children:"Image"}),Object(s.jsxs)("div",{className:"field__radio",children:[Object(s.jsx)("input",{checked:E,type:"radio",name:"imageUrlOption",value:"link",onChange:function(){R(!0),C(!1)}}),Object(s.jsx)("input",{className:"textfield ".concat(E||"textfield--disabled"),disabled:!E,type:"text",onChange:function(e){var t=e.target.value;g(t),e.target.style.borderBottomColor=te(t)?"green":"red"},name:"imageUrl",placeholder:"https://cdn.urldelimage.com/image.png",value:x})]}),Object(s.jsxs)("div",{className:"field__radio",children:[Object(s.jsx)("input",{checked:y,type:"radio",name:"imageUrlOption",value:"file",onChange:function(){R(!1),C(!0)}}),Object(s.jsx)("input",{className:"textfield ".concat(y||"textfield--disabled"),disabled:!y,type:"file",name:"imageUrl",placeholder:"Chargez votre image ici..."})]})]}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{className:"button ".concat(ne||"button--disabled"),disabled:!ne,type:"submit",value:"Modifier le produit"})})]},4)]},E=function(e){var t=e.token,a=Object(n.useState)(null),c=Object(v.a)(a,2),i=c[0],r=c[1],l=Object(n.useState)(Object(p.h)().id),o=Object(v.a)(l,1)[0],d=Object(n.useState)(!1),j=Object(v.a)(d,2),u=j[0],b=j[1],m=Object(n.useState)(null),O=Object(v.a)(m,2),x=O[0],g=O[1],N=Object(n.useState)(null),S=Object(v.a)(N,2),y=S[0],C=S[1];if(!u){var k="http://localhost:3200/api/products/".concat(o),T=new XMLHttpRequest;T.open("GET",k),T.onreadystatechange=function(){if(4===T.readyState){var e=JSON.parse(T.responseText).product;200===T.status&&g(e),b(!0)}},T.send()}return t?u?x?y?Object(s.jsx)(p.a,{to:y}):[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"Supprimer un produit - STUFF MANAGER"})},0),Object(s.jsxs)("h1",{className:"title",children:["Supprimer ",x.name," ?"]},1),i&&Object(s.jsx)("p",{className:"error",children:i},2),Object(s.jsx)("p",{children:"Voulez-vous vraiment supprimer ce produit ?"},3),Object(s.jsxs)("div",{className:"deleteForm",children:[Object(s.jsx)("form",{action:"",className:"field",method:"POST",onSubmit:function(e){e.preventDefault();var a="http://localhost:3200/api/products/".concat(o),s=new XMLHttpRequest;s.open("DELETE",a),s.onreadystatechange=function(){if(4===s.readyState){var e=JSON.parse(s.responseText).message;200===s.status&&C("/"),r(200===s.status?null:e),b(!0)}},s.setRequestHeader("Authorization",t),s.send()},children:Object(s.jsx)("input",{className:"link",type:"submit",value:"OUI"})}),Object(s.jsx)("form",{action:"",className:"field",method:"POST",onSubmit:function(e){e.preventDefault(),C("/product/".concat(o))},children:Object(s.jsx)("input",{className:"link",type:"submit",value:"NON"})})]},4)]:[Object(s.jsx)("h1",{className:"title",children:"Produit inexistant"},0),Object(s.jsx)("p",{className:"error",children:"Ce produit n'existe pas ou a \xe9t\xe9 retir\xe9."},1)]:[Object(s.jsx)("h1",{className:"title",children:"Encore un peu de patience..."},0),Object(s.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(s.jsx)(f,{})},1)]:Object(s.jsx)(F,{})},R=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={connected:!(!sessionStorage.getItem("TOKEN")||!sessionStorage.getItem("userID")),token:sessionStorage.getItem("TOKEN"),userID:sessionStorage.getItem("userID")},e.logout=function(){sessionStorage.clear(),e.setState({connected:!1})},e.tryLogin=function(t,a){sessionStorage.setItem("TOKEN","Bearer ".concat(t)),sessionStorage.setItem("userID",a),e.setState({connected:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.connected,a=e.token;return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(h.a,{children:Object(s.jsx)("title",{children:"STUFF MANAGER"})}),Object(s.jsxs)(u.a,{children:[Object(s.jsx)(m,{admin:t,logoutHandler:this.logout}),Object(s.jsxs)(p.d,{children:[Object(s.jsx)(p.b,{exact:!0,path:"/",children:Object(s.jsx)(N,{})}),Object(s.jsx)(p.b,{exact:!0,path:"/addProduct",children:Object(s.jsx)(k,{token:a})}),Object(s.jsx)(p.b,{exact:!0,path:"/login",children:Object(s.jsx)(y,{setTokenHandle:this.tryLogin})}),Object(s.jsx)(p.b,{exact:!0,path:"/logout",children:Object(s.jsx)(p.a,{to:"/"})}),Object(s.jsx)(p.b,{exact:!0,path:"/register",children:Object(s.jsx)(C,{})}),Object(s.jsx)(p.b,{path:"/product/:id/modify",children:Object(s.jsx)(T,{token:a})}),Object(s.jsx)(p.b,{path:"/product/:id/delete",children:Object(s.jsx)(E,{token:a})}),Object(s.jsx)(p.b,{exact:!0,path:"/product/:id",children:Object(s.jsx)(S,{admin:t})}),Object(s.jsx)(p.b,{path:"*",children:Object(s.jsx)(x,{})})]}),Object(s.jsx)(O,{})]})]})}}]),a}(n.Component),A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,37)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))};r.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(R,{})}),document.getElementById("root")),A()}},[[36,1,2]]]);
//# sourceMappingURL=main.e23ee865.chunk.js.map
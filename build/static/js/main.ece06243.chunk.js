(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{142:function(e,t,a){},149:function(e,t){},151:function(e,t){},165:function(e,t){},167:function(e,t){},195:function(e,t){},197:function(e,t){},198:function(e,t){},203:function(e,t){},205:function(e,t){},224:function(e,t){},236:function(e,t){},239:function(e,t){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),c=a.n(s),i=a(131),r=a.n(i),l=a(16),o=a(17),d=a(19),u=a(18),j=a(23),p=a(6),h=a(10),b=(a(142),function(e){var t=e.hRef,a=e.content,s=e.onclick,c=Object(p.g)().pathname===t;return Object(n.jsx)(j.a,{children:Object(n.jsx)("li",{className:"menu__option ".concat(c&&"menu__option--selected"),children:c?Object(n.jsx)("span",{children:a}):Object(n.jsx)("a",{href:t,onClick:s,children:a})})})}),m=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.admin,a=e.logoutHandler;return Object(n.jsxs)("nav",{className:"navbar",children:[Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)("a",{href:"/",children:"Stuff Manager"})}),Object(n.jsx)("ul",{className:"menu",children:t?[Object(n.jsx)(b,{hRef:"/",content:"Liste des produits"},0),Object(n.jsx)(b,{hRef:"/addProduct",content:"Ajouter un produit"},1),Object(n.jsx)(b,{hRef:"/logout",content:"D\xe9connexion",onclick:a},2)]:[Object(n.jsx)(b,{hRef:"/",content:"Liste des produits"},0),Object(n.jsx)(b,{hRef:"/login",content:"Connexion"},3),Object(n.jsx)(b,{hRef:"/register",content:"Inscription"},4)]})]})}}]),a}(s.Component),O=function(){return Object(n.jsx)("footer",{className:"footer",children:Object(n.jsx)("span",{children:"Tous droits r\xe9serv\xe9s \xa9 2020"})})},x=function(){return[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"Non trouv\xe9e - STUFF MANAGER"})},0),Object(n.jsx)("h1",{className:"title",children:"Erreur 404"},1),Object(n.jsx)("p",{className:"error",children:"Cette page n'existe pas ou a \xe9t\xe9 retir\xe9e."},2)]},f=function(){return Object(n.jsx)("div",{className:"loading"})},g=function(e){var t=e.ID,a=e.name,s=e.price,c=e.imageUrl,i=e.firstOfRange;return Object(n.jsx)("div",{className:"productItem ".concat(i&&"productItem--firstOfRange"),children:Object(n.jsxs)("a",{href:"/product/".concat(t),title:a,children:[Object(n.jsx)("img",{className:"productItem__img",alt:a,src:c}),Object(n.jsxs)("div",{className:"productItem__caption",children:[Object(n.jsx)("p",{className:"name",children:a}),Object(n.jsx)("p",{className:"price",children:s})]})]})})},v=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={products:null,loaded:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new XMLHttpRequest;t.open("GET","http://localhost:3200/api/products"),t.onreadystatechange=function(){if(4===t.readyState){var a=JSON.parse(t.responseText);e.setState({products:200===t.status?a.products:null}),e.setState({loaded:!0})}},t.send()}},{key:"render",value:function(){var e=this.state,t=e.products,a=function(e){return[Object(n.jsx)("h1",{className:"title",children:"Liste des produits"},0),Object(n.jsx)("div",{className:"productsList",children:e},1)]};return a(e.loaded?t?t.map((function(e,t){return Object(n.jsx)(g,{ID:e._id,name:e.name,price:e.price,imageUrl:e.imageUrl,firstOfRange:t%4===0},e._id)})):Object(n.jsx)("p",{children:"Aucun produit pour l'instant."}):Object(n.jsx)(f,{}))}}]),a}(s.Component),N=a(5),y=function(e){var t=e.admin,a=Object(s.useState)(null),c=Object(N.a)(a,2),i=c[0],r=c[1],l=Object(s.useState)(Object(p.h)().id),o=Object(N.a)(l,1)[0],d=Object(s.useState)(!1),u=Object(N.a)(d,2),j=u[0],b=u[1],m={justifyContent:j?"initial":"center"};if(!j){var O="http://localhost:3200/api/products/".concat(o),x=new XMLHttpRequest;x.open("GET",O),x.onreadystatechange=function(){if(4===x.readyState){if(200===x.status){var e=JSON.parse(x.responseText);r(e.product)}b(!0)}},x.send()}var g=function(e,t){return[Object(n.jsx)("h1",{className:"title",children:e},0),Object(n.jsx)("div",{className:"product",style:m,children:t},1)]};if(!j)return g("Encore un peu de patience...",Object(n.jsx)(f,{}));if(!i)return g("Produit inexistant",Object(n.jsx)("p",{className:"error",children:"Ce produit n'existe pas ou a \xe9t\xe9 retir\xe9."}));var v=i._id,y=i.name,S=i.price,C=i.description,F=i.quantity,k=i.imageUrl;return g(y,[Object(n.jsx)(h.a,{children:Object(n.jsxs)("title",{children:[y," - STUFF MANAGER"]})},2),Object(n.jsx)("img",{alt:y,src:k,className:"product__img"},3),Object(n.jsxs)("div",{className:"product__aside",children:[Object(n.jsx)("p",{className:"description",children:C}),Object(n.jsxs)("div",{className:"otherInfos",children:[Object(n.jsxs)("p",{children:["Prix : ",Object(n.jsx)("span",{className:"price",children:S})]}),Object(n.jsxs)("p",{children:["Quantit\xe9 : ",Object(n.jsx)("span",{children:F>0?F:"Aucune."})]}),t&&[Object(n.jsx)("p",{children:Object(n.jsx)("a",{className:"link",href:"/product/".concat(v,"/modify"),title:"Modifier",children:"Modifier"})},6),Object(n.jsx)("p",{children:Object(n.jsx)("a",{className:"link",href:"/product/".concat(v,"/delete"),title:"Supprimer",children:"Supprimer"})},7)]]})]},4)])},S=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={login:"",password:"",redirect:null,error:null},e.onChangeLogin=function(t){e.setState({login:t.target.value})},e.onChangePassword=function(t){e.setState({password:t.target.value})},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.login,s=a.password,c=new XMLHttpRequest;c.open("POST","http://localhost:3200/api/auth/login"),c.onreadystatechange=function(){if(4===c.readyState){var t=JSON.parse(c.responseText);if(200===c.status){var a=t.token,n=t.userId;e.props.setTokenHandle(a,n),e.setState({redirect:"/",error:null})}else e.setState({error:t.message})}},c.setRequestHeader("Content-Type","application/json"),c.send(JSON.stringify({login:n,email:n,password:s}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.login,a=e.password,s=e.redirect,c=e.error,i=t.length>0&&a.length>0;return s?Object(n.jsx)(p.a,{to:s}):[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"Connexion - STUFF MANAGER"})},0),Object(n.jsx)("h1",{className:"title",children:"Connexion"},1),c&&Object(n.jsx)("p",{className:"error",children:c},2),Object(n.jsxs)("form",{action:"/",className:"loginForm",method:"POST",onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"loginForm__field field",children:[Object(n.jsx)("label",{htmlFor:"Email ou pseudo",children:"Email ou pseudo"}),Object(n.jsx)("input",{className:"textfield",type:"text",name:"login",onChange:this.onChangeLogin,placeholder:"jdupont"})]}),Object(n.jsxs)("div",{className:"loginForm__field field",children:[Object(n.jsx)("label",{htmlFor:"Mot de passe",children:"Mot de passe"}),Object(n.jsx)("input",{className:"textfield",type:"password",name:"mdp",onChange:this.onChangePassword})]}),Object(n.jsx)("div",{className:"loginForm__field field",children:Object(n.jsx)("input",{className:"button ".concat(i||"button--disabled"),type:"submit",value:"Se connecter",disabled:!i})})]},3)]}}]),a}(s.Component),C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={error:null,success:null,email:"",login:"",password:""},e.isValidEmail=function(){return e.state.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)},e.isValidLogin=function(){return e.state.login.match(/^[a-zA-Z0-9]{6,}$/)},e.isValidPassword=function(){return e.state.password.length>=6},e.onChangeEmail=function(t){e.setState({email:t.target.value}),t.target.style.borderBottomColor=e.isValidEmail()?"green":"red"},e.onChangeLogin=function(t){e.setState({login:t.target.value}),t.target.style.borderBottomColor=e.isValidLogin()?"green":"red"},e.onChangePassword=function(t){e.setState({password:t.target.value}),t.target.style.borderBottomColor=e.isValidPassword()?"green":"red"},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,s=a.login,c=a.password,i=new XMLHttpRequest;i.open("POST","http://localhost:3200/api/auth/register"),i.onreadystatechange=function(){if(4===i.readyState){var t=JSON.parse(i.responseText);201===i.status?e.setState({error:null,success:t.message}):e.setState({error:t.message,success:null})}},i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify({email:n,login:s,password:c}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.success,s=this.isValidEmail()&&this.isValidLogin()&&this.isValidPassword();return[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"Inscription - STUFF MANAGER"})},0),Object(n.jsx)("h1",{className:"title",children:"Inscription"},1),t&&Object(n.jsx)("p",{className:"error",children:t},2),a&&Object(n.jsx)("p",{className:"success",children:a},3),Object(n.jsxs)("form",{action:"/",className:"registerForm",method:"POST",onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"registerForm__field field",children:[Object(n.jsx)("label",{htmlFor:"Email",children:"Email"}),Object(n.jsx)("input",{className:"textfield",name:"email",onChange:this.onChangeEmail,placeholder:"jdupont@gmail.com",type:"text"})]}),Object(n.jsxs)("div",{className:"registerForm__field field",children:[Object(n.jsx)("label",{htmlFor:"Pseudo",children:"Pseudo"}),Object(n.jsx)("input",{className:"textfield",type:"text",name:"login",onChange:this.onChangeLogin,placeholder:"Minimum 6 caract\xe8res, alphanum\xe9riques uniquement"})]}),Object(n.jsxs)("div",{className:"registerForm__field field",children:[Object(n.jsx)("label",{htmlFor:"Mot de passe",children:"Mot de passe"}),Object(n.jsx)("input",{className:"textfield",type:"password",name:"mdp",onChange:this.onChangePassword,placeholder:"Minimum 6 caract\xe8res"})]}),Object(n.jsx)("div",{className:"registerForm__field field",children:Object(n.jsx)("input",{className:"button ".concat(s||"button--disabled"),disabled:!s,type:"submit",value:"S'inscrire"})})]},4)]}}]),a}(s.Component),F=function(){return[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"Acc\xe8s interdit - STUFF MANAGER"})},0),Object(n.jsx)("h1",{className:"title",children:"Erreur 403"},1),Object(n.jsx)("p",{className:"error",children:"Vous n'avez pas acc\xe8s \xe0 cette page."},2)]},k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={description:"",error:null,imageUrl:"",fileChecked:!1,linkChecked:!1,name:"",price:"",quantity:"",success:null},e.isNotEmpty=function(e){return""!==e.trim()},e.onChangeDescription=function(t){e.setState({description:t.target.value})},e.onChangeName=function(t){var a=t.target.value;e.setState({name:a}),t.target.style.borderBottomColor=e.isNotEmpty(a)?"green":"red"},e.onChangePrice=function(t){var a=t.target.value,n=function(e){return e.match(/^[0-9]+\.?([0-9]{1,2})?$/)};(n(a)||""===a)&&e.setState({price:a}),t.target.style.borderBottomColor=n(e.state.price)?"green":"red"},e.onChangeQuantity=function(t){var a=t.target.value,n=function(e){return e.match(/^[0-9]+$/)};(n(a)||""===a)&&e.setState({quantity:a}),t.target.style.borderBottomColor=n(e.state.quantity)?"green":"red"},e.onChangeImageUrl=function(t){var a=t.target.value;e.setState({imageUrl:a}),t.target.style.borderBottomColor=e.isNotEmpty(a)?"green":"red"},e.onSelectRadioLink=function(){e.setState({linkChecked:!0,fileChecked:!1})},e.onSelectRadioFile=function(){e.setState({linkChecked:!1,fileChecked:!0})},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.name,s=a.price,c=a.description,i=a.quantity,r=a.imageUrl,l=new XMLHttpRequest;l.open("POST","http://localhost:3200/api/products"),l.onreadystatechange=function(){if(4===l.readyState){var t=JSON.parse(l.responseText);201===l.status?e.setState({error:null,success:"/"}):e.setState({error:t.message,success:null})}},l.setRequestHeader("Content-type","application/json"),l.setRequestHeader("Authorization",e.props.token),l.send(JSON.stringify({name:n,price:Number.parseFloat(s),description:c,quantity:Number.parseInt(i),imageUrl:r}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.fileChecked,s=e.linkChecked,c=e.success,i=this.state,r=i.name,l=i.price,o=i.quantity,d=i.imageUrl,u=this.props.token,j=this.isNotEmpty(r)&&this.isNotEmpty(l)&&this.isNotEmpty(o)&&this.isNotEmpty(d);return u?c?Object(n.jsx)(p.a,{to:c}):[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"Ajouter un produit - STUFF MANAGER"})},0),Object(n.jsx)("h1",{className:"title",children:"Ajouter un produit"},1),t&&Object(n.jsx)("p",{className:"error",children:t},2),Object(n.jsxs)("form",{action:"",method:"POST",onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Nom",children:"Nom du produit"}),Object(n.jsx)("input",{className:"textfield",name:"name",onChange:this.onChangeName,placeholder:"Nom du produit",type:"text"})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Prix",children:"Prix (\u20ac)"}),Object(n.jsx)("input",{className:"textfield",inputMode:"numeric",name:"price",onChange:this.onChangePrice,placeholder:"12.34",type:"text",value:l})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Description",children:"Description"}),Object(n.jsx)("textarea",{className:"textfield textfield--area",name:"description",onChange:this.onChangeDescription,placeholder:"Ici, la description..."})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Quantit\xe9",children:"Quantit\xe9"}),Object(n.jsx)("input",{className:"textfield",inputMode:"decimal",name:"quantity",onChange:this.onChangeQuantity,placeholder:"123",type:"text",value:o})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Quantit\xe9",children:"Image"}),Object(n.jsxs)("div",{className:"field__radio",children:[Object(n.jsx)("input",{checked:s,type:"radio",name:"imageUrlOption",value:"link",onChange:this.onSelectRadioLink}),Object(n.jsx)("input",{className:"textfield ".concat(s||"textfield--disabled"),disabled:!s,type:"text",onChange:this.onChangeImageUrl,name:"imageUrl",placeholder:"https://cdn.urldelimage.com/image.png"})]}),Object(n.jsxs)("div",{className:"field__radio",children:[Object(n.jsx)("input",{checked:a,type:"radio",name:"imageUrlOption",value:"file",onChange:this.onSelectRadioFile}),Object(n.jsx)("input",{className:"textfield ".concat(a||"textfield--disabled"),disabled:!a,type:"file",name:"imageUrl",placeholder:"Chargez votre image ici..."})]})]}),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("input",{className:"button ".concat(j||"button--disabled"),disabled:!j,type:"submit",value:"Ajouter le produit"})})]},3)]:Object(n.jsx)(F,{})}}]),a}(s.Component),E=function(e){var t=e.token,a=Object(s.useState)(""),c=Object(N.a)(a,2),i=c[0],r=c[1],l=Object(s.useState)(null),o=Object(N.a)(l,2),d=o[0],u=o[1],j=Object(s.useState)(Object(p.h)().id),b=Object(N.a)(j,1)[0],m=Object(s.useState)(""),O=Object(N.a)(m,2),x=O[0],g=O[1],v=Object(s.useState)(!1),y=Object(N.a)(v,2),S=y[0],C=y[1],k=Object(s.useState)(!1),E=Object(N.a)(k,2),T=E[0],R=E[1],_=Object(s.useState)(!1),A=Object(N.a)(_,2),M=A[0],w=A[1],P=Object(s.useState)(""),U=Object(N.a)(P,2),I=U[0],q=U[1],L=Object(s.useState)(""),D=Object(N.a)(L,2),H=D[0],J=D[1],B=Object(s.useState)(null),G=Object(N.a)(B,2),V=G[0],z=G[1],Q=Object(s.useState)(null),X=Object(N.a)(Q,2),$=X[0],K=X[1],Z=Object(s.useState)(null),Y=Object(N.a)(Z,2),W=Y[0],ee=Y[1];function te(e){return""!==e.trim()}if(!M){var ae="http://localhost:3200/api/products/".concat(b),ne=new XMLHttpRequest;ne.open("GET",ae),ne.onreadystatechange=function(){if(4===ne.readyState){var e=JSON.parse(ne.responseText);if(200===ne.status){var t=e.product,a=t.name,n=t.description,s=t.price,c=t.imageUrl,i=t.quantity;z(e.product),q(a),r(n||""),J("".concat(s)),K("".concat(i)),g(c)}w(!0)}},ne.send()}if(!t)return Object(n.jsx)(F,{});if(W)return Object(n.jsx)(p.a,{to:W});if(!M)return[Object(n.jsx)("h1",{className:"title",children:"Encore un peu de patience..."},0),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(f,{})},1)];if(!V)return[Object(n.jsx)("h1",{className:"title",children:"Produit inexistant"},0),Object(n.jsx)("p",{className:"error",children:"Ce produit n'existe pas ou a \xe9t\xe9 retir\xe9."},1)];var se=te(I)&&te(H)&&te($)&&te(x);return[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"Modifier un produit - STUFF MANAGER"})},0),Object(n.jsx)("h1",{className:"title",children:"Modifier le produit"},1),d&&Object(n.jsx)("p",{className:"error",children:d},2),Object(n.jsxs)("form",{action:"",method:"POST",onSubmit:function(e){e.preventDefault();var a="http://localhost:3200/api/products/".concat(b),n=new XMLHttpRequest;n.open("PUT",a),n.onreadystatechange=function(){if(4===n.readyState){var e=JSON.parse(n.responseText).message;u(201===n.status?null:e),ee(201===n.status?"/product/".concat(b):null)}},n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("Authorization",t),n.send(JSON.stringify({name:I,price:Number.parseFloat(H),description:i,quantity:Number.parseInt($),imageUrl:x}))},children:[Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Nom",children:"Nom du produit"}),Object(n.jsx)("input",{className:"textfield",name:"name",onChange:function(e){var t=e.target.value;q(t),e.target.style.borderBottomColor=te(t)?"green":"red"},placeholder:"Nom du produit",type:"text",value:I})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Prix",children:"Prix (\u20ac)"}),Object(n.jsx)("input",{className:"textfield",inputMode:"numeric",name:"price",onChange:function(e){var t=e.target.value,a=function(e){return e.match(/^[0-9]+\.?([0-9]{1,2})?$/)};(a(t)||""===t)&&J(t),e.target.style.borderBottomColor=a(H)?"green":"red"},placeholder:"12.34",type:"text",value:H})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Description",children:"Description"}),Object(n.jsx)("textarea",{className:"textfield textfield--area",defaultValue:i,name:"description",onChange:function(e){r(e.target.value)},placeholder:"Ici, la description..."})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Quantit\xe9",children:"Quantit\xe9"}),Object(n.jsx)("input",{className:"textfield",inputMode:"decimal",name:"quantity",onChange:function(e){var t=e.target.value,a=function(e){return e.match(/^[0-9]+$/)};(a(t)||""===t)&&K(t),e.target.style.borderBottomColor=a($)?"green":"red"},placeholder:"123",type:"text",value:$})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{htmlFor:"Quantit\xe9",children:"Image"}),Object(n.jsxs)("div",{className:"field__radio",children:[Object(n.jsx)("input",{checked:T,type:"radio",name:"imageUrlOption",value:"link",onChange:function(){R(!0),C(!1)}}),Object(n.jsx)("input",{className:"textfield ".concat(T||"textfield--disabled"),disabled:!T,type:"text",onChange:function(e){var t=e.target.value;g(t),e.target.style.borderBottomColor=te(t)?"green":"red"},name:"imageUrl",placeholder:"https://cdn.urldelimage.com/image.png",value:x})]}),Object(n.jsxs)("div",{className:"field__radio",children:[Object(n.jsx)("input",{checked:S,type:"radio",name:"imageUrlOption",value:"file",onChange:function(){R(!1),C(!0)}}),Object(n.jsx)("input",{className:"textfield ".concat(S||"textfield--disabled"),disabled:!S,type:"file",name:"imageUrl",placeholder:"Chargez votre image ici..."})]})]}),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("input",{className:"button ".concat(se||"button--disabled"),disabled:!se,type:"submit",value:"Modifier le produit"})})]},3)]},T=function(e){var t=e.token,a=Object(s.useState)(null),c=Object(N.a)(a,2),i=c[0],r=c[1],l=Object(s.useState)(Object(p.h)().id),o=Object(N.a)(l,1)[0],d=Object(s.useState)(!1),u=Object(N.a)(d,2),j=u[0],b=u[1],m=Object(s.useState)(null),O=Object(N.a)(m,2),x=O[0],g=O[1],v=Object(s.useState)(null),y=Object(N.a)(v,2),S=y[0],C=y[1];if(!j){var k="http://localhost:3200/api/products/".concat(o),E=new XMLHttpRequest;E.open("GET",k),E.onreadystatechange=function(){if(4===E.readyState){var e=JSON.parse(E.responseText).product;200===E.status&&g(e),b(!0)}},E.send()}return t?j?x?S?Object(n.jsx)(p.a,{to:S}):[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"Supprimer un produit - STUFF MANAGER"})},0),Object(n.jsxs)("h1",{className:"title",children:["Supprimer ",x.name," ?"]},1),i&&Object(n.jsx)("p",{className:"error",children:i},2),Object(n.jsx)("p",{children:"Voulez-vous vraiment supprimer ce produit ?"},3),Object(n.jsxs)("div",{className:"deleteForm",children:[Object(n.jsx)("form",{action:"",className:"field",method:"POST",onSubmit:function(e){e.preventDefault();var a="http://localhost:3200/api/products/".concat(o),n=new XMLHttpRequest;n.open("DELETE",a),n.onreadystatechange=function(){if(4===n.readyState){var e=JSON.parse(n.responseText).message;200===n.status&&C("/"),r(200===n.status?null:e),b(!0)}},n.setRequestHeader("Authorization",t),n.send()},children:Object(n.jsx)("input",{className:"link",type:"submit",value:"OUI"})}),Object(n.jsx)("form",{action:"",className:"field",method:"POST",onSubmit:function(e){e.preventDefault(),C("/product/".concat(o))},children:Object(n.jsx)("input",{className:"link",type:"submit",value:"NON"})})]},4)]:[Object(n.jsx)("h1",{className:"title",children:"Produit inexistant"},0),Object(n.jsx)("p",{className:"error",children:"Ce produit n'existe pas ou a \xe9t\xe9 retir\xe9."},1)]:[Object(n.jsx)("h1",{className:"title",children:"Encore un peu de patience..."},0),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(f,{})},1)]:Object(n.jsx)(F,{})},R=function(){var e=sessionStorage.getItem("userID"),t=a(145);try{var n=sessionStorage.getItem("TOKEN").split(" ")[1],s=t.verify(n,"RANDOM_SECRET_KEY").userId;return e&&e===s}catch(c){return sessionStorage.clear(),!1}},_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={connected:R(),token:sessionStorage.getItem("TOKEN")},e.logout=function(){sessionStorage.clear(),e.setState({connected:!1})},e.tryLogin=function(t,a){sessionStorage.setItem("TOKEN","Bearer ".concat(t)),sessionStorage.setItem("userID",a),e.setState({connected:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.connected,a=e.token;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(h.a,{children:Object(n.jsx)("title",{children:"STUFF MANAGER"})}),Object(n.jsxs)(j.a,{children:[Object(n.jsx)(m,{admin:t,logoutHandler:this.logout}),Object(n.jsxs)(p.d,{children:[Object(n.jsx)(p.b,{exact:!0,path:"/",children:Object(n.jsx)(v,{})}),Object(n.jsx)(p.b,{exact:!0,path:"/addProduct",children:Object(n.jsx)(k,{token:a})}),Object(n.jsx)(p.b,{exact:!0,path:"/login",children:Object(n.jsx)(S,{setTokenHandle:this.tryLogin})}),Object(n.jsx)(p.b,{exact:!0,path:"/logout",children:Object(n.jsx)(p.a,{to:"/"})}),Object(n.jsx)(p.b,{exact:!0,path:"/register",children:Object(n.jsx)(C,{})}),Object(n.jsx)(p.b,{path:"/product/:id/modify",children:Object(n.jsx)(E,{token:a})}),Object(n.jsx)(p.b,{path:"/product/:id/delete",children:Object(n.jsx)(T,{token:a})}),Object(n.jsx)(p.b,{exact:!0,path:"/product/:id",children:Object(n.jsx)(y,{admin:t})}),Object(n.jsx)(p.b,{path:"*",children:Object(n.jsx)(x,{})})]}),Object(n.jsx)(O,{})]})]})}}]),a}(s.Component),A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,257)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))};r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(_,{})}),document.getElementById("root")),A()}},[[256,1,2]]]);
//# sourceMappingURL=main.ece06243.chunk.js.map